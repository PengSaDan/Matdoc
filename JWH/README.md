### 3 / 15 (수)
- 병원 테이블을 만드는데 hive 에서 auto_increment 붙이는 법을 탐구중.. 겨우 해결했으나 아직 테이블을 완성하진 못했다. 
### 3 / 16 (목)
- 병원, 병원상세 테이블 hive에 생성 완료.
    - 약 관련 데이터 hdfs 에 적재 완료 -> 금 오전에 마무리 할 예정
- 중간발표 스크립트 작성

### 3 / 17 (금)
- 약 기본 테이블 만드는 중 hive에서 서브쿼리가 실행되지 않는 이슈로 지연중
- 중간발표 진행

---
# 백엔드 개발 1주차 톺아보기
- 월화 : (월)MapReduce와 (화)Hive를 공부하기 위해 블로그 글들을 보며 예제를 찾아 따라했다. 맵리듀스는 코드가 자바로 작성되지만 기본참조형이나 라이브러리가 많이 달라 코드를 쉽게 읽기 어려웠다.하이브는 SQL쿼리로 작성하기만 하면되서 맵리듀스보다 이용이 어렵진 않았다.
- 수 :  hive에서의 auto_increment 문제. 대체적으로 시도하라고 알려진 모든 코드가 돌아가지 않았다. 일단 hive를 켜서 show function; 하는것도 잘 안됐다. 인터넷을 전전하다가 jar파일이 라이브러리에 제대로 추가가 안되는게 아닐까..? 하고 hdfs에 jar를 올린 후 lib추가해줬더니 잘 돌아갔다. hive가 읽을 수 있는 곳까지 끌고와야한다고 생각했다. 이걸로 하루 마감.
- 목 : 이제 나를 막을 복병은 없다고 생각했으나 sqoop이 에러가 났다. 병원, 병원상세는 마무리하고 스쿱은 내일 알아보도록 하자.
- 금 : 다른 팀원은 스쿱 에러를 해결하기로 하고 나는 약 drug 테이블 쿼리를 짜기로 했다. 병원에서는 테이블 조인이 많이 없어서 느끼지 못했는데 하이브는 update와 delect를 지원하지 않고 서브쿼리도 제한적이다. 그래서 조인이 많은 약 테이블은 돌아가지 않았다.
    - 분할선을 만드는 이슈: drug 테이블에 들어가는 분할선은 여러 컬럼을 조합해 만들어야 하는 것이었다. markf와 markb에 "a분할선b" 이런식으로 string이 주어지는데 이걸 읽고 분할선의 유무를 알아야했고, 분할선이 있다면 어떤 모양으로 있는지 linef, lineb에서 확인해야 했다. like함수를 써서 "분할선"이라는 단어가 있으면 concat함수를 사용해 분할선을 표시해줬다. (hive에서 concat함수는 문법이 조금 달랐다.)
    - drug_secu 조인 : 하이브는 서브쿼리를 쓸 때 단일 행만 return받아야 한다. 그래서 내가 아무리 단일 행만 가지고 있어도 문법 자체가 단일행만 return하는 형식이어야 했다. 그래서 여러 방법들을 생각해봤는데 concat으로 하나로 묶는 방법과, NVL을 사용해 리턴을 하나만 받는 방법도 생각해봤다. 하지만 둘다 연산이 많은지 잘 돌아가지 않았고.. 결국 left outer join으로 묶어버렸다. 원래 하이브에서는 빅데이터라서 조인자체를 잘 하지않는다고 했는데 우리는 데이터가 작고 달리 해결법이 떠오르지 않아 일단 이 방법을 채택했다. 
    
    ### 3 / 20 (월)
    - drug_desc 완성
    - hive 1차로 여기까지 마감. drug의 병용금기가 join 부하로 돌아가지 않지만 당장 해결할 방법이 떠오르지않아 일단 처리된 데이터까지 스프링부트 개발하기로 결정했다.

    ### 3 / 21 (화)
    - sqoop으로 리눅스 내 mysql에 데이터 옮기고 그 데이터를 dump 해서 서버에 올리는 것 까지 완료.
    - 스프링부트 프로젝트 환경설정해서 개발 시작
    
